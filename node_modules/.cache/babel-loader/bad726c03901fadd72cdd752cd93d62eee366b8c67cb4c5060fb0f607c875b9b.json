{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\eniac\\\\Desktop\\\\deepblue\\\\src\\\\components\\\\Whiteboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Ellipse, Image, Layer, Line, Rect, Stage, Transformer } from 'react-konva';\nimport io from 'socket.io-client';\n// Fix import paths to be within src directory\nimport circleIcon from '../assets/icons/circle.png';\nimport clearIcon from '../assets/icons/clear.png';\nimport eraserIcon from '../assets/icons/eraser.png';\nimport imageIcon from '../assets/icons/image.png';\nimport lineIcon from '../assets/icons/line.png';\nimport penIcon from '../assets/icons/pen.png';\nimport rectangleIcon from '../assets/icons/rectangle.png';\nimport selectIcon from '../assets/icons/select.png';\n// Add logo import\nimport logo from '../assets/logo/logo.png';\n// Add these imports at the top with other icon imports\nimport colorPaletteIcon from '../assets/icons/palette.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io('http://192.168.31.158:3001', {\n  transports: ['websocket', 'polling'],\n  reconnectionDelay: 1000,\n  reconnectionAttempts: 10,\n  forceNew: true\n});\nconst Whiteboard = () => {\n  _s();\n  const [lines, setLines] = useState([]);\n  const [shapes, setShapes] = useState([]);\n  const [selectedId, setSelectedId] = useState(null);\n  const [tool, setTool] = useState('pen');\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [startPos, setStartPos] = useState({\n    x: 0,\n    y: 0\n  });\n  const [selectedColor, setSelectedColor] = useState('#000000');\n  const [selectedStrokeWidth, setSelectedStrokeWidth] = useState(5);\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const [showStrokePicker, setShowStrokePicker] = useState(false);\n  const transformerRef = useRef();\n  const stageRef = useRef();\n  // Add state for logo\n  const [logoImage] = useState(new window.Image());\n  const colors = ['#000000', '#FF0000', '#00FF00', '#0000FF', '#FFFF00', '#FF00FF', '#00FFFF', '#800000', '#008000', '#000080', '#808000', '#800080', '#008080', '#808080', '#C0C0C0', '#FFFFFF'];\n  useEffect(() => {\n    socket.on('draw-update', ({\n      lines,\n      shapes\n    }) => {\n      setLines(lines);\n      setShapes(shapes);\n    });\n    return () => {\n      socket.off('draw-update');\n    };\n  }, []);\n  useEffect(() => {\n    if (selectedId) {\n      const shape = shapes.find(s => s.id === selectedId);\n      if (shape && transformerRef.current) {\n        transformerRef.current.nodes([stageRef.current.findOne('#' + selectedId)]);\n        transformerRef.current.getLayer().batchDraw();\n      }\n    }\n  }, [selectedId, shapes]);\n\n  // Add useEffect for logo loading\n  useEffect(() => {\n    logoImage.src = logo;\n  }, [logoImage]);\n  const handleMouseDown = e => {\n    let pos;\n    if (e.type === 'touchstart') {\n      var _e$evt, _e$evt$touches;\n      if (e.evt) {\n        e.evt.preventDefault();\n      }\n      const touch = (_e$evt = e.evt) === null || _e$evt === void 0 ? void 0 : (_e$evt$touches = _e$evt.touches) === null || _e$evt$touches === void 0 ? void 0 : _e$evt$touches[0];\n      if (touch) {\n        const stage = e.target.getStage();\n        pos = stage.getPointerPosition();\n      }\n    } else {\n      pos = e.target.getStage().getPointerPosition();\n    }\n    if (!pos) return;\n    setIsDrawing(true);\n    setStartPos(pos);\n    if (tool === 'pen') {\n      const newLine = {\n        tool,\n        points: [pos.x, pos.y],\n        color: selectedColor,\n        strokeWidth: selectedStrokeWidth,\n        tension: 0.2,\n        lineCap: 'round',\n        lineJoin: 'round'\n      };\n      setLines([...lines, newLine]);\n    } else if (tool === 'eraser') {\n      const newLine = {\n        tool,\n        points: [pos.x, pos.y],\n        color: '#ffffff',\n        strokeWidth: selectedStrokeWidth * 2,\n        tension: 0.2,\n        lineCap: 'round',\n        lineJoin: 'round'\n      };\n      setLines([...lines, newLine]);\n    } else if (tool === 'select') {\n      const clickedShape = e.target;\n      if (clickedShape === e.target.getStage()) {\n        setSelectedId(null);\n        return;\n      }\n      if (clickedShape.getParent().className === 'Transformer') {\n        return;\n      }\n      setSelectedId(clickedShape.id());\n    }\n  };\n  const handleMouseMove = e => {\n    if (!isDrawing) return;\n    const pos = e.type.includes('touch') ? e.target.getStage().getPointerPosition() : e.target.getStage().getPointerPosition();\n    if (!pos) return;\n    if (tool === 'pen' || tool === 'eraser') {\n      const lastLine = [...lines];\n      const lastLineIndex = lastLine.length - 1;\n      if (lastLineIndex >= 0) {\n        lastLine[lastLineIndex].points = lastLine[lastLineIndex].points.concat([pos.x, pos.y]);\n        setLines(lastLine);\n        socket.emit('draw-update', {\n          lines: lastLine,\n          shapes\n        });\n      }\n    } else if (tool === 'line') {\n      const tempShapes = shapes.filter(shape => shape.id !== 'temp');\n      const newShape = {\n        id: 'temp',\n        type: 'line',\n        x: startPos.x,\n        y: startPos.y,\n        width: pos.x - startPos.x,\n        height: pos.y - startPos.y,\n        color: selectedColor,\n        strokeWidth: selectedStrokeWidth,\n        points: [startPos.x, startPos.y, pos.x, pos.y]\n      };\n      setShapes([...tempShapes, newShape]);\n    } else if (['rectangle', 'circle'].includes(tool)) {\n      // Shape preview code\n      const tempShapes = shapes.filter(shape => shape.id !== 'temp');\n      const newShape = {\n        id: 'temp',\n        type: tool,\n        x: Math.min(startPos.x, pos.x),\n        y: Math.min(startPos.y, pos.y),\n        width: Math.abs(pos.x - startPos.x),\n        height: Math.abs(pos.y - startPos.y),\n        color: selectedColor,\n        strokeWidth: selectedStrokeWidth\n      };\n      setShapes([...tempShapes, newShape]);\n    }\n  };\n  const handleMouseUp = () => {\n    setIsDrawing(false);\n    if (['line', 'rectangle', 'circle'].includes(tool)) {\n      const tempShape = shapes.find(shape => shape.id === 'temp');\n      if (tempShape) {\n        const newShapes = shapes.filter(shape => shape.id !== 'temp').concat({\n          ...tempShape,\n          id: Date.now().toString()\n        });\n        setShapes(newShapes);\n        socket.emit('draw-update', {\n          lines,\n          shapes: newShapes\n        });\n      }\n    } else if (tool === 'pen' || tool === 'eraser') {\n      socket.emit('draw-update', {\n        lines,\n        shapes\n      });\n    }\n  };\n  const handleImageUpload = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!file.type.startsWith('image/')) {\n      alert('Please upload an image file');\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = () => {\n      const img = new window.Image();\n      img.onload = () => {\n        const tempCanvas = document.createElement('canvas');\n        const tempCtx = tempCanvas.getContext('2d');\n\n        // Calculate dimensions while maintaining aspect ratio\n        let targetWidth = img.width;\n        let targetHeight = img.height;\n\n        // Maximum dimensions (adjust these values as needed)\n        const MAX_WIDTH = 1200;\n        const MAX_HEIGHT = 1200;\n\n        // Scale down if image is too large\n        if (targetWidth > MAX_WIDTH || targetHeight > MAX_HEIGHT) {\n          if (targetWidth / targetHeight > MAX_WIDTH / MAX_HEIGHT) {\n            targetWidth = MAX_WIDTH;\n            targetHeight = img.height * MAX_WIDTH / img.width;\n          } else {\n            targetHeight = MAX_HEIGHT;\n            targetWidth = img.width * MAX_HEIGHT / img.height;\n          }\n        }\n\n        // Set canvas size and enable high-quality scaling\n        tempCanvas.width = targetWidth;\n        tempCanvas.height = targetHeight;\n\n        // Enable image smoothing\n        tempCtx.imageSmoothingEnabled = true;\n        tempCtx.imageSmoothingQuality = 'high';\n\n        // Draw image with better quality\n        tempCtx.drawImage(img, 0, 0, targetWidth, targetHeight);\n\n        // Get high-quality image data\n        const processedImageData = tempCanvas.toDataURL('image/png', 1.0);\n        const newShape = {\n          id: Date.now().toString(),\n          type: 'image',\n          x: window.innerWidth / 4,\n          y: window.innerHeight / 4,\n          width: targetWidth,\n          height: targetHeight,\n          image: processedImageData,\n          rotation: 0\n        };\n        const newShapes = [...shapes, newShape];\n        setShapes(newShapes);\n        socket.emit('draw-update', {\n          lines,\n          shapes: newShapes\n        });\n      };\n      img.src = reader.result;\n    };\n    reader.readAsDataURL(file);\n  };\n  const handleDragEnd = e => {\n    const shape = e.target;\n    const newShapes = shapes.map(s => {\n      if (s.id === shape.id()) {\n        if (s.type === 'circle') {\n          return {\n            ...s,\n            x: shape.x() - s.width / 2,\n            y: shape.y() - s.height / 2\n          };\n        }\n        return {\n          ...s,\n          x: shape.x(),\n          y: shape.y()\n        };\n      }\n      return s;\n    });\n    setShapes(newShapes);\n    socket.emit('draw-update', {\n      lines,\n      shapes: newShapes\n    });\n  };\n  const handleTransformEnd = e => {\n    const node = e.target;\n    const scaleX = node.scaleX();\n    const scaleY = node.scaleY();\n    node.scaleX(1);\n    node.scaleY(1);\n    const newShapes = shapes.map(shape => shape.id === node.id() ? {\n      ...shape,\n      x: node.x(),\n      y: node.y(),\n      width: Math.abs(node.width() * scaleX),\n      height: Math.abs(node.height() * scaleY),\n      rotation: node.rotation()\n    } : shape);\n    setShapes(newShapes);\n    socket.emit('draw-update', {\n      lines,\n      shapes: newShapes\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"whiteboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        left: 10,\n        top: '50%',\n        transform: 'translateY(-50%)',\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '8px',\n        backgroundColor: 'rgba(255, 255, 255, 0.8)',\n        padding: '10px',\n        borderRadius: '8px',\n        zIndex: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTool('pen'),\n        style: {\n          padding: 8,\n          backgroundColor: 'transparent',\n          border: '1px solid #333',\n          borderRadius: '4px',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          width: '40px',\n          height: '40px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: penIcon,\n          alt: \"Pen\",\n          width: \"24\",\n          height: \"24\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTool('eraser'),\n        style: {/* same button style */},\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: eraserIcon,\n          alt: \"Eraser\",\n          width: \"24\",\n          height: \"24\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTool('line'),\n        style: {/* same button style */},\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: lineIcon,\n          alt: \"Line\",\n          width: \"24\",\n          height: \"24\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTool('rectangle'),\n        style: {/* same button style */},\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: rectangleIcon,\n          alt: \"Rectangle\",\n          width: \"24\",\n          height: \"24\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTool('circle'),\n        style: {/* same button style */},\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: circleIcon,\n          alt: \"Circle\",\n          width: \"24\",\n          height: \"24\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setTool('select'),\n        style: {/* same button style */},\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: selectIcon,\n          alt: \"Select\",\n          width: \"24\",\n          height: \"24\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'inline-block',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowColorPicker(!showColorPicker),\n          style: {\n            width: '40px',\n            height: '40px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            border: '1px solid #333',\n            borderRadius: '4px',\n            backgroundColor: 'transparent',\n            cursor: 'pointer'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: colorPaletteIcon,\n            alt: \"Color Palette\",\n            width: \"24\",\n            height: \"24\",\n            style: {\n              filter: `drop-shadow(0 0 2px ${selectedColor})`,\n              backgroundColor: 'transparent'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), showColorPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '100%',\n            left: '100%',\n            backgroundColor: 'white',\n            border: '1px solid #ccc',\n            padding: 5,\n            display: 'grid',\n            gridTemplateColumns: 'repeat(4, 1fr)',\n            gap: 5,\n            zIndex: 2,\n            marginLeft: '10px'\n          },\n          children: colors.map((color, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: 25,\n              height: 25,\n              backgroundColor: color,\n              cursor: 'pointer',\n              border: '1px solid #ccc'\n            },\n            onClick: () => {\n              setSelectedColor(color);\n              setShowColorPicker(false);\n            }\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'inline-block',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowStrokePicker(!showStrokePicker),\n          style: {\n            width: '40px',\n            height: '40px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            border: '1px solid #333',\n            borderRadius: '4px',\n            backgroundColor: 'transparent',\n            cursor: 'pointer'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: selectedStrokeWidth,\n              height: selectedStrokeWidth,\n              backgroundColor: selectedColor,\n              borderRadius: '50%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), showStrokePicker && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '100%',\n            left: '100%',\n            backgroundColor: 'white',\n            border: '1px solid #ccc',\n            padding: '10px',\n            display: 'grid',\n            gridTemplateColumns: 'repeat(4, 1fr)',\n            gap: '10px',\n            zIndex: 2,\n            marginLeft: '10px',\n            width: '120px'\n          },\n          children: Array.from({\n            length: 16\n          }, (_, i) => i + 1).map(width => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '25px',\n              height: '25px',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              border: selectedStrokeWidth === width ? '2px solid #00ff00' : '1px solid #ccc',\n              borderRadius: '4px',\n              padding: '2px'\n            },\n            onClick: () => {\n              setSelectedStrokeWidth(width);\n              setShowStrokePicker(false);\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: width,\n                height: width,\n                backgroundColor: selectedColor,\n                borderRadius: '50%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 19\n            }, this)\n          }, width, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: handleImageUpload,\n          style: {\n            width: '40px',\n            height: '40px',\n            opacity: 0,\n            position: 'absolute',\n            left: 0,\n            top: 0,\n            cursor: 'pointer',\n            zIndex: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            width: '40px',\n            height: '40px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            border: '1px solid #333',\n            borderRadius: '4px',\n            backgroundColor: 'transparent',\n            cursor: 'pointer'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: imageIcon,\n            alt: \"Upload Image\",\n            width: \"24\",\n            height: \"24\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setLines([]);\n          setShapes([]);\n          socket.emit('draw-update', {\n            lines: [],\n            shapes: []\n          });\n        },\n        style: {\n          width: '40px',\n          height: '40px',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          border: '1px solid #333',\n          borderRadius: '4px',\n          backgroundColor: 'transparent',\n          cursor: 'pointer'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: clearIcon,\n          alt: \"Clear All\",\n          width: \"24\",\n          height: \"24\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Stage, {\n      ref: stageRef,\n      width: window.innerWidth,\n      height: window.innerHeight,\n      onMouseDown: handleMouseDown,\n      onMouseMove: handleMouseMove,\n      onMouseUp: handleMouseUp,\n      onTouchStart: handleMouseDown,\n      onTouchMove: handleMouseMove,\n      onTouchEnd: handleMouseUp,\n      onContextMenu: e => e.evt.preventDefault(),\n      listening: true,\n      touchAction: \"none\",\n      style: {\n        touchAction: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(Layer, {\n        children: [/*#__PURE__*/_jsxDEV(Image, {\n          image: logoImage,\n          x: window.innerWidth - 110 // 10px padding from right edge\n          ,\n          y: 10,\n          width: 100,\n          height: 40,\n          opacity: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this), shapes.map(shape => {\n          if (shape.type === 'image') {\n            const imageObj = new window.Image();\n            imageObj.crossOrigin = 'anonymous';\n            imageObj.src = shape.image;\n            return /*#__PURE__*/_jsxDEV(Image, {\n              id: shape.id,\n              image: imageObj,\n              x: shape.x,\n              y: shape.y,\n              width: shape.width,\n              height: shape.height,\n              rotation: shape.rotation,\n              draggable: tool === 'select',\n              onClick: () => tool === 'select' && setSelectedId(shape.id),\n              onDragEnd: handleDragEnd,\n              onTransformEnd: handleTransformEnd,\n              globalCompositeOperation: \"source-over\"\n            }, shape.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 17\n            }, this);\n          } else if (shape.type === 'line') {\n            return /*#__PURE__*/_jsxDEV(Line, {\n              id: shape.id,\n              points: shape.points || [shape.x, shape.y, shape.x + shape.width, shape.y + shape.height],\n              stroke: shape.color,\n              strokeWidth: shape.strokeWidth,\n              draggable: tool === 'select',\n              onClick: () => tool === 'select' && setSelectedId(shape.id),\n              onDragEnd: handleDragEnd,\n              onTransformEnd: handleTransformEnd\n            }, shape.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 17\n            }, this);\n          } else if (shape.type === 'rectangle') {\n            return /*#__PURE__*/_jsxDEV(Rect, {\n              id: shape.id,\n              x: shape.x,\n              y: shape.y,\n              width: shape.width,\n              height: shape.height,\n              stroke: shape.color,\n              strokeWidth: shape.strokeWidth,\n              draggable: tool === 'select',\n              onClick: () => tool === 'select' && setSelectedId(shape.id),\n              onDragEnd: handleDragEnd,\n              onTransformEnd: handleTransformEnd\n            }, shape.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 17\n            }, this);\n          } else if (shape.type === 'circle') {\n            return /*#__PURE__*/_jsxDEV(Ellipse, {\n              id: shape.id,\n              x: shape.x + shape.width / 2,\n              y: shape.y + shape.height / 2,\n              radiusX: shape.width / 2,\n              radiusY: shape.height / 2,\n              stroke: shape.color,\n              strokeWidth: shape.strokeWidth,\n              draggable: tool === 'select',\n              onClick: () => tool === 'select' && setSelectedId(shape.id),\n              onDragEnd: handleDragEnd,\n              onTransformEnd: handleTransformEnd\n            }, shape.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 17\n            }, this);\n          }\n          return null;\n        }), lines.map((line, i) => /*#__PURE__*/_jsxDEV(Line, {\n          points: line.points,\n          stroke: line.color,\n          strokeWidth: line.strokeWidth,\n          tension: 0.4,\n          lineCap: \"round\",\n          lineJoin: \"round\",\n          globalCompositeOperation: line.tool === 'eraser' ? 'destination-out' : 'source-over'\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 649,\n          columnNumber: 13\n        }, this)), selectedId && tool === 'select' && /*#__PURE__*/_jsxDEV(Transformer, {\n          ref: transformerRef,\n          boundBoxFunc: (oldBox, newBox) => {\n            const isValid = newBox.width > 5 && newBox.height > 5;\n            return isValid ? newBox : oldBox;\n          },\n          rotationSnaps: [0, 45, 90, 135, 180, 225, 270, 315],\n          enabledAnchors: ['top-left', 'top-center', 'top-right', 'middle-left', 'middle-right', 'bottom-left', 'bottom-center', 'bottom-right'],\n          anchorSize: 8,\n          anchorCornerRadius: 4,\n          borderStroke: \"#00ff00\",\n          anchorStroke: \"#00ff00\",\n          anchorFill: \"#ffffff\",\n          padding: 5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 313,\n    columnNumber: 5\n  }, this);\n};\n_s(Whiteboard, \"lnCZHwgbUIQekXOMvTrIni7slPo=\");\n_c = Whiteboard;\nexport default Whiteboard;\nvar _c;\n$RefreshReg$(_c, \"Whiteboard\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Ellipse","Image","Layer","Line","Rect","Stage","Transformer","io","circleIcon","clearIcon","eraserIcon","imageIcon","lineIcon","penIcon","rectangleIcon","selectIcon","logo","colorPaletteIcon","jsxDEV","_jsxDEV","socket","transports","reconnectionDelay","reconnectionAttempts","forceNew","Whiteboard","_s","lines","setLines","shapes","setShapes","selectedId","setSelectedId","tool","setTool","isDrawing","setIsDrawing","startPos","setStartPos","x","y","selectedColor","setSelectedColor","selectedStrokeWidth","setSelectedStrokeWidth","showColorPicker","setShowColorPicker","showStrokePicker","setShowStrokePicker","transformerRef","stageRef","logoImage","window","colors","on","off","shape","find","s","id","current","nodes","findOne","getLayer","batchDraw","src","handleMouseDown","e","pos","type","_e$evt","_e$evt$touches","evt","preventDefault","touch","touches","stage","target","getStage","getPointerPosition","newLine","points","color","strokeWidth","tension","lineCap","lineJoin","clickedShape","getParent","className","handleMouseMove","includes","lastLine","lastLineIndex","length","concat","emit","tempShapes","filter","newShape","width","height","Math","min","abs","handleMouseUp","tempShape","newShapes","Date","now","toString","handleImageUpload","file","files","startsWith","alert","reader","FileReader","onload","img","tempCanvas","document","createElement","tempCtx","getContext","targetWidth","targetHeight","MAX_WIDTH","MAX_HEIGHT","imageSmoothingEnabled","imageSmoothingQuality","drawImage","processedImageData","toDataURL","innerWidth","innerHeight","image","rotation","result","readAsDataURL","handleDragEnd","map","handleTransformEnd","node","scaleX","scaleY","children","style","position","left","top","transform","display","flexDirection","gap","backgroundColor","padding","borderRadius","zIndex","onClick","border","cursor","alignItems","justifyContent","alt","fileName","_jsxFileName","lineNumber","columnNumber","gridTemplateColumns","marginLeft","i","Array","from","_","accept","onChange","opacity","ref","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onContextMenu","listening","touchAction","imageObj","crossOrigin","draggable","onDragEnd","onTransformEnd","globalCompositeOperation","stroke","radiusX","radiusY","line","boundBoxFunc","oldBox","newBox","isValid","rotationSnaps","enabledAnchors","anchorSize","anchorCornerRadius","borderStroke","anchorStroke","anchorFill","_c","$RefreshReg$"],"sources":["C:/Users/eniac/Desktop/deepblue/src/components/Whiteboard.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { Ellipse, Image, Layer, Line, Rect, Stage, Transformer } from 'react-konva';\r\nimport io from 'socket.io-client';\r\n// Fix import paths to be within src directory\r\nimport circleIcon from '../assets/icons/circle.png';\r\nimport clearIcon from '../assets/icons/clear.png';\r\nimport eraserIcon from '../assets/icons/eraser.png';\r\nimport imageIcon from '../assets/icons/image.png';\r\nimport lineIcon from '../assets/icons/line.png';\r\nimport penIcon from '../assets/icons/pen.png';\r\nimport rectangleIcon from '../assets/icons/rectangle.png';\r\nimport selectIcon from '../assets/icons/select.png';\r\n// Add logo import\r\nimport logo from '../assets/logo/logo.png';\r\n// Add these imports at the top with other icon imports\r\nimport colorPaletteIcon from '../assets/icons/palette.png';\r\n\r\nconst socket = io('http://192.168.31.158:3001', {\r\n  transports: ['websocket', 'polling'],\r\n  reconnectionDelay: 1000,\r\n  reconnectionAttempts: 10,\r\n  forceNew: true\r\n});\r\n\r\nconst Whiteboard = () => {\r\n  const [lines, setLines] = useState([]);\r\n  const [shapes, setShapes] = useState([]);\r\n  const [selectedId, setSelectedId] = useState(null);\r\n  const [tool, setTool] = useState('pen');\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  const [startPos, setStartPos] = useState({ x: 0, y: 0 });\r\n  const [selectedColor, setSelectedColor] = useState('#000000');\r\n  const [selectedStrokeWidth, setSelectedStrokeWidth] = useState(5);\r\n  const [showColorPicker, setShowColorPicker] = useState(false);\r\n  const [showStrokePicker, setShowStrokePicker] = useState(false);\r\n  const transformerRef = useRef();\r\n  const stageRef = useRef();\r\n  // Add state for logo\r\n  const [logoImage] = useState(new window.Image());\r\n\r\n  const colors = [\r\n    '#000000', '#FF0000', '#00FF00', '#0000FF',\r\n    '#FFFF00', '#FF00FF', '#00FFFF', '#800000',\r\n    '#008000', '#000080', '#808000', '#800080',\r\n    '#008080', '#808080', '#C0C0C0', '#FFFFFF'\r\n  ];\r\n\r\n  useEffect(() => {\r\n    socket.on('draw-update', ({ lines, shapes }) => {\r\n      setLines(lines);\r\n      setShapes(shapes);\r\n    });\r\n\r\n    return () => {\r\n      socket.off('draw-update');\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedId) {\r\n      const shape = shapes.find(s => s.id === selectedId);\r\n      if (shape && transformerRef.current) {\r\n        transformerRef.current.nodes([stageRef.current.findOne('#' + selectedId)]);\r\n        transformerRef.current.getLayer().batchDraw();\r\n      }\r\n    }\r\n  }, [selectedId, shapes]);\r\n\r\n  // Add useEffect for logo loading\r\n  useEffect(() => {\r\n    logoImage.src = logo;\r\n  }, [logoImage]);\r\n\r\n  const handleMouseDown = (e) => {\r\n    let pos;\r\n    \r\n    if (e.type === 'touchstart') {\r\n      if (e.evt) {\r\n        e.evt.preventDefault();\r\n      }\r\n      const touch = e.evt?.touches?.[0];\r\n      if (touch) {\r\n        const stage = e.target.getStage();\r\n        pos = stage.getPointerPosition();\r\n      }\r\n    } else {\r\n      pos = e.target.getStage().getPointerPosition();\r\n    }\r\n  \r\n    if (!pos) return;\r\n    \r\n    setIsDrawing(true);\r\n    setStartPos(pos);\r\n  \r\n    if (tool === 'pen') {\r\n      const newLine = {\r\n        tool,\r\n        points: [pos.x, pos.y],\r\n        color: selectedColor,\r\n        strokeWidth: selectedStrokeWidth,\r\n        tension: 0.2,\r\n        lineCap: 'round',\r\n        lineJoin: 'round'\r\n      };\r\n      setLines([...lines, newLine]);\r\n    } else if (tool === 'eraser') {\r\n      const newLine = {\r\n        tool,\r\n        points: [pos.x, pos.y],\r\n        color: '#ffffff',\r\n        strokeWidth: selectedStrokeWidth * 2,\r\n        tension: 0.2,\r\n        lineCap: 'round',\r\n        lineJoin: 'round'\r\n      };\r\n      setLines([...lines, newLine]);\r\n    } else if (tool === 'select') {\r\n      const clickedShape = e.target;\r\n      if (clickedShape === e.target.getStage()) {\r\n        setSelectedId(null);\r\n        return;\r\n      }\r\n      if (clickedShape.getParent().className === 'Transformer') {\r\n        return;\r\n      }\r\n      setSelectedId(clickedShape.id());\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!isDrawing) return;\r\n\r\n    const pos = e.type.includes('touch') ?\r\n      e.target.getStage().getPointerPosition() :\r\n      e.target.getStage().getPointerPosition();\r\n\r\n    if (!pos) return;\r\n\r\n    if (tool === 'pen' || tool === 'eraser') {\r\n      const lastLine = [...lines];\r\n      const lastLineIndex = lastLine.length - 1;\r\n      \r\n      if (lastLineIndex >= 0) {\r\n        lastLine[lastLineIndex].points = lastLine[lastLineIndex].points.concat([pos.x, pos.y]);\r\n        setLines(lastLine);\r\n        socket.emit('draw-update', { lines: lastLine, shapes });\r\n      }\r\n    } else if (tool === 'line') {\r\n      const tempShapes = shapes.filter(shape => shape.id !== 'temp');\r\n      const newShape = {\r\n        id: 'temp',\r\n        type: 'line',\r\n        x: startPos.x,\r\n        y: startPos.y,\r\n        width: pos.x - startPos.x,\r\n        height: pos.y - startPos.y,\r\n        color: selectedColor,\r\n        strokeWidth: selectedStrokeWidth,\r\n        points: [startPos.x, startPos.y, pos.x, pos.y]\r\n      };\r\n      setShapes([...tempShapes, newShape]);\r\n    } else if (['rectangle', 'circle'].includes(tool)) {\r\n      // Shape preview code\r\n      const tempShapes = shapes.filter(shape => shape.id !== 'temp');\r\n      const newShape = {\r\n        id: 'temp',\r\n        type: tool,\r\n        x: Math.min(startPos.x, pos.x),\r\n        y: Math.min(startPos.y, pos.y),\r\n        width: Math.abs(pos.x - startPos.x),\r\n        height: Math.abs(pos.y - startPos.y),\r\n        color: selectedColor,\r\n        strokeWidth: selectedStrokeWidth\r\n      };\r\n      setShapes([...tempShapes, newShape]);\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setIsDrawing(false);\r\n    \r\n    if (['line', 'rectangle', 'circle'].includes(tool)) {\r\n      const tempShape = shapes.find(shape => shape.id === 'temp');\r\n      if (tempShape) {\r\n        const newShapes = shapes\r\n          .filter(shape => shape.id !== 'temp')\r\n          .concat({ ...tempShape, id: Date.now().toString() });\r\n        setShapes(newShapes);\r\n        socket.emit('draw-update', { lines, shapes: newShapes });\r\n      }\r\n    } else if (tool === 'pen' || tool === 'eraser') {\r\n      socket.emit('draw-update', { lines, shapes });\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n  \r\n    if (!file.type.startsWith('image/')) {\r\n      alert('Please upload an image file');\r\n      return;\r\n    }\r\n  \r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      const img = new window.Image();\r\n      \r\n      img.onload = () => {\r\n        const tempCanvas = document.createElement('canvas');\r\n        const tempCtx = tempCanvas.getContext('2d');\r\n  \r\n        // Calculate dimensions while maintaining aspect ratio\r\n        let targetWidth = img.width;\r\n        let targetHeight = img.height;\r\n        \r\n        // Maximum dimensions (adjust these values as needed)\r\n        const MAX_WIDTH = 1200;\r\n        const MAX_HEIGHT = 1200;\r\n  \r\n        // Scale down if image is too large\r\n        if (targetWidth > MAX_WIDTH || targetHeight > MAX_HEIGHT) {\r\n          if (targetWidth / targetHeight > MAX_WIDTH / MAX_HEIGHT) {\r\n            targetWidth = MAX_WIDTH;\r\n            targetHeight = (img.height * MAX_WIDTH) / img.width;\r\n          } else {\r\n            targetHeight = MAX_HEIGHT;\r\n            targetWidth = (img.width * MAX_HEIGHT) / img.height;\r\n          }\r\n        }\r\n  \r\n        // Set canvas size and enable high-quality scaling\r\n        tempCanvas.width = targetWidth;\r\n        tempCanvas.height = targetHeight;\r\n        \r\n        // Enable image smoothing\r\n        tempCtx.imageSmoothingEnabled = true;\r\n        tempCtx.imageSmoothingQuality = 'high';\r\n        \r\n        // Draw image with better quality\r\n        tempCtx.drawImage(img, 0, 0, targetWidth, targetHeight);\r\n        \r\n        // Get high-quality image data\r\n        const processedImageData = tempCanvas.toDataURL('image/png', 1.0);\r\n  \r\n        const newShape = {\r\n          id: Date.now().toString(),\r\n          type: 'image',\r\n          x: window.innerWidth / 4,\r\n          y: window.innerHeight / 4,\r\n          width: targetWidth,\r\n          height: targetHeight,\r\n          image: processedImageData,\r\n          rotation: 0,\r\n        };\r\n  \r\n        const newShapes = [...shapes, newShape];\r\n        setShapes(newShapes);\r\n        socket.emit('draw-update', { lines, shapes: newShapes });\r\n      };\r\n  \r\n      img.src = reader.result;\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleDragEnd = (e) => {\r\n    const shape = e.target;\r\n    const newShapes = shapes.map(s => {\r\n      if (s.id === shape.id()) {\r\n        if (s.type === 'circle') {\r\n          return {\r\n            ...s,\r\n            x: shape.x() - s.width / 2,\r\n            y: shape.y() - s.height / 2\r\n          };\r\n        }\r\n        return {\r\n          ...s,\r\n          x: shape.x(),\r\n          y: shape.y()\r\n        };\r\n      }\r\n      return s;\r\n    });\r\n    setShapes(newShapes);\r\n    socket.emit('draw-update', { lines, shapes: newShapes });\r\n  };\r\n\r\n  const handleTransformEnd = (e) => {\r\n    const node = e.target;\r\n    const scaleX = node.scaleX();\r\n    const scaleY = node.scaleY();\r\n    \r\n    node.scaleX(1);\r\n    node.scaleY(1);\r\n    \r\n    const newShapes = shapes.map(shape => \r\n      shape.id === node.id() ? {\r\n        ...shape,\r\n        x: node.x(),\r\n        y: node.y(),\r\n        width: Math.abs(node.width() * scaleX),\r\n        height: Math.abs(node.height() * scaleY),\r\n        rotation: node.rotation()\r\n      } : shape\r\n    );\r\n    setShapes(newShapes);\r\n    socket.emit('draw-update', { lines, shapes: newShapes });\r\n  };\r\n\r\n  return (\r\n    <div className=\"whiteboard-container\">\r\n      <div style={{ \r\n        position: 'fixed', \r\n        left: 10, \r\n        top: '50%', \r\n        transform: 'translateY(-50%)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '8px',\r\n        backgroundColor: 'rgba(255, 255, 255, 0.8)',\r\n        padding: '10px',\r\n        borderRadius: '8px',\r\n        zIndex: 1,\r\n      }}>\r\n        <button \r\n          onClick={() => setTool('pen')} \r\n          style={{ \r\n            padding: 8,\r\n            backgroundColor: 'transparent',\r\n            border: '1px solid #333',\r\n            borderRadius: '4px',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            width: '40px',\r\n            height: '40px'\r\n          }}\r\n        >\r\n          <img src={penIcon} alt=\"Pen\" width=\"24\" height=\"24\" />\r\n        </button>\r\n        {/* Apply the same style to other tool buttons */}\r\n        <button onClick={() => setTool('eraser')} style={{ /* same button style */ }}>\r\n          <img src={eraserIcon} alt=\"Eraser\" width=\"24\" height=\"24\" />\r\n        </button>\r\n        <button onClick={() => setTool('line')} style={{ /* same button style */ }}>\r\n          <img src={lineIcon} alt=\"Line\" width=\"24\" height=\"24\" />\r\n        </button>\r\n        <button onClick={() => setTool('rectangle')} style={{ /* same button style */ }}>\r\n          <img src={rectangleIcon} alt=\"Rectangle\" width=\"24\" height=\"24\" />\r\n        </button>\r\n        <button onClick={() => setTool('circle')} style={{ /* same button style */ }}>\r\n          <img src={circleIcon} alt=\"Circle\" width=\"24\" height=\"24\" />\r\n        </button>\r\n        <button onClick={() => setTool('select')} style={{ /* same button style */ }}>\r\n          <img src={selectIcon} alt=\"Select\" width=\"24\" height=\"24\" />\r\n        </button>\r\n\r\n        {/* Color Picker */}\r\n        <div style={{ display: 'inline-block', position: 'relative' }}>\r\n          <button \r\n            onClick={() => setShowColorPicker(!showColorPicker)}\r\n            style={{ \r\n              width: '40px',\r\n              height: '40px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              border: '1px solid #333',\r\n              borderRadius: '4px',\r\n              backgroundColor: 'transparent',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            <img src={colorPaletteIcon} alt=\"Color Palette\" width=\"24\" height=\"24\" \r\n              style={{ \r\n                filter: `drop-shadow(0 0 2px ${selectedColor})`,\r\n                backgroundColor: 'transparent'\r\n              }}\r\n            />\r\n          </button>\r\n          {showColorPicker && (\r\n            <div style={{\r\n              position: 'absolute',\r\n              top: '100%',\r\n              left: '100%',\r\n              backgroundColor: 'white',\r\n              border: '1px solid #ccc',\r\n              padding: 5,\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(4, 1fr)',\r\n              gap: 5,\r\n              zIndex: 2,\r\n              marginLeft: '10px',\r\n            }}>\r\n              {colors.map((color, i) => (\r\n                <div\r\n                  key={i}\r\n                  style={{\r\n                    width: 25,\r\n                    height: 25,\r\n                    backgroundColor: color,\r\n                    cursor: 'pointer',\r\n                    border: '1px solid #ccc'\r\n                  }}\r\n                  onClick={() => {\r\n                    setSelectedColor(color);\r\n                    setShowColorPicker(false);\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Stroke Width Picker */}\r\n        <div style={{ display: 'inline-block', position: 'relative' }}>\r\n          <button \r\n            onClick={() => setShowStrokePicker(!showStrokePicker)}\r\n            style={{ \r\n              width: '40px',\r\n              height: '40px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              border: '1px solid #333',\r\n              borderRadius: '4px',\r\n              backgroundColor: 'transparent',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            <div style={{\r\n              width: selectedStrokeWidth,\r\n              height: selectedStrokeWidth,\r\n              backgroundColor: selectedColor,\r\n              borderRadius: '50%'\r\n            }}/>\r\n          </button>\r\n          {showStrokePicker && (\r\n            <div style={{\r\n              position: 'absolute',\r\n              top: '100%',\r\n              left: '100%',\r\n              backgroundColor: 'white',\r\n              border: '1px solid #ccc',\r\n              padding: '10px',\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(4, 1fr)',\r\n              gap: '10px',\r\n              zIndex: 2,\r\n              marginLeft: '10px',\r\n              width: '120px'\r\n            }}>\r\n              {Array.from({ length: 16 }, (_, i) => i + 1).map((width) => (\r\n                <div\r\n                  key={width}\r\n                  style={{\r\n                    width: '25px',\r\n                    height: '25px',\r\n                    cursor: 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    border: selectedStrokeWidth === width ? '2px solid #00ff00' : '1px solid #ccc',\r\n                    borderRadius: '4px',\r\n                    padding: '2px'\r\n                  }}\r\n                  onClick={() => {\r\n                    setSelectedStrokeWidth(width);\r\n                    setShowStrokePicker(false);\r\n                  }}\r\n                >\r\n                  <div style={{\r\n                    width: width,\r\n                    height: width,\r\n                    backgroundColor: selectedColor,\r\n                    borderRadius: '50%'\r\n                  }}/>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Image Upload */}\r\n        <div style={{ position: 'relative' }}>\r\n          <input \r\n            type=\"file\" \r\n            accept=\"image/*\" \r\n            onChange={handleImageUpload}\r\n            style={{ \r\n              width: '40px',\r\n              height: '40px',\r\n              opacity: 0,\r\n              position: 'absolute',\r\n              left: 0,\r\n              top: 0,\r\n              cursor: 'pointer',\r\n              zIndex: 1\r\n            }}\r\n          />\r\n          <button style={{ \r\n            width: '40px',\r\n            height: '40px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            border: '1px solid #333',\r\n            borderRadius: '4px',\r\n            backgroundColor: 'transparent',\r\n            cursor: 'pointer'\r\n          }}>\r\n            <img src={imageIcon} alt=\"Upload Image\" width=\"24\" height=\"24\" />\r\n          </button>\r\n        </div>\r\n\r\n        <button \r\n          onClick={() => {\r\n            setLines([]);\r\n            setShapes([]);\r\n            socket.emit('draw-update', { lines: [], shapes: [] });\r\n          }} \r\n          style={{ \r\n            width: '40px',\r\n            height: '40px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            border: '1px solid #333',\r\n            borderRadius: '4px',\r\n            backgroundColor: 'transparent',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          <img src={clearIcon} alt=\"Clear All\" width=\"24\" height=\"24\" />\r\n        </button>\r\n      </div>\r\n\r\n      <Stage\r\n        ref={stageRef}\r\n        width={window.innerWidth}\r\n        height={window.innerHeight}\r\n        onMouseDown={handleMouseDown}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        onTouchStart={handleMouseDown}\r\n        onTouchMove={handleMouseMove}\r\n        onTouchEnd={handleMouseUp}\r\n        onContextMenu={e => e.evt.preventDefault()}\r\n        listening={true}\r\n        touchAction=\"none\"\r\n        style={{ touchAction: 'none' }}\r\n      >\r\n        <Layer>\r\n          {/* First Layer: Background Elements */}\r\n          <Image\r\n            image={logoImage}\r\n            x={window.innerWidth - 110} // 10px padding from right edge\r\n            y={10}\r\n            width={100}\r\n            height={40}\r\n            opacity={1}\r\n          />\r\n\r\n          {/* Second Layer: Shapes and Images */}\r\n          {shapes.map((shape) => {\r\n            if (shape.type === 'image') {\r\n              const imageObj = new window.Image();\r\n              imageObj.crossOrigin = 'anonymous';\r\n              imageObj.src = shape.image;\r\n              return (\r\n                <Image\r\n                  key={shape.id}\r\n                  id={shape.id}\r\n                  image={imageObj}\r\n                  x={shape.x}\r\n                  y={shape.y}\r\n                  width={shape.width}\r\n                  height={shape.height}\r\n                  rotation={shape.rotation}\r\n                  draggable={tool === 'select'}\r\n                  onClick={() => tool === 'select' && setSelectedId(shape.id)}\r\n                  onDragEnd={handleDragEnd}\r\n                  onTransformEnd={handleTransformEnd}\r\n                  globalCompositeOperation=\"source-over\"\r\n                />\r\n              );\r\n            } else if (shape.type === 'line') {\r\n              return (\r\n                <Line\r\n                  key={shape.id}\r\n                  id={shape.id}\r\n                  points={shape.points || [\r\n                    shape.x,\r\n                    shape.y,\r\n                    shape.x + shape.width,\r\n                    shape.y + shape.height\r\n                  ]}\r\n                  stroke={shape.color}\r\n                  strokeWidth={shape.strokeWidth}\r\n                  draggable={tool === 'select'}\r\n                  onClick={() => tool === 'select' && setSelectedId(shape.id)}\r\n                  onDragEnd={handleDragEnd}\r\n                  onTransformEnd={handleTransformEnd}\r\n                />\r\n              );\r\n            } else if (shape.type === 'rectangle') {\r\n              return (\r\n                <Rect\r\n                  key={shape.id}\r\n                  id={shape.id}\r\n                  x={shape.x}\r\n                  y={shape.y}\r\n                  width={shape.width}\r\n                  height={shape.height}\r\n                  stroke={shape.color}\r\n                  strokeWidth={shape.strokeWidth}\r\n                  draggable={tool === 'select'}\r\n                  onClick={() => tool === 'select' && setSelectedId(shape.id)}\r\n                  onDragEnd={handleDragEnd}\r\n                  onTransformEnd={handleTransformEnd}\r\n                />\r\n              );\r\n            } else if (shape.type === 'circle') {\r\n              return (\r\n                <Ellipse\r\n                  key={shape.id}\r\n                  id={shape.id}\r\n                  x={shape.x + shape.width / 2}\r\n                  y={shape.y + shape.height / 2}\r\n                  radiusX={shape.width / 2}\r\n                  radiusY={shape.height / 2}\r\n                  stroke={shape.color}\r\n                  strokeWidth={shape.strokeWidth}\r\n                  draggable={tool === 'select'}\r\n                  onClick={() => tool === 'select' && setSelectedId(shape.id)}\r\n                  onDragEnd={handleDragEnd}\r\n                  onTransformEnd={handleTransformEnd}\r\n                />\r\n              );\r\n            }\r\n            return null;\r\n          })}\r\n\r\n          {/* Third Layer: Drawing Lines and Eraser */}\r\n          {lines.map((line, i) => (\r\n            <Line\r\n              key={i}\r\n              points={line.points}\r\n              stroke={line.color}\r\n              strokeWidth={line.strokeWidth}\r\n              tension={0.4}\r\n              lineCap=\"round\"\r\n              lineJoin=\"round\"\r\n              globalCompositeOperation={\r\n                line.tool === 'eraser' ? 'destination-out' : 'source-over'\r\n              }\r\n            />\r\n          ))}\r\n\r\n          {/* Top Layer: Selection Transform */}\r\n          {selectedId && tool === 'select' && (\r\n            <Transformer\r\n              ref={transformerRef}\r\n              boundBoxFunc={(oldBox, newBox) => {\r\n                const isValid = newBox.width > 5 && newBox.height > 5;\r\n                return isValid ? newBox : oldBox;\r\n              }}\r\n              rotationSnaps={[0, 45, 90, 135, 180, 225, 270, 315]}\r\n              enabledAnchors={[\r\n                'top-left', 'top-center', 'top-right',\r\n                'middle-left', 'middle-right',\r\n                'bottom-left', 'bottom-center', 'bottom-right'\r\n              ]}\r\n              anchorSize={8}\r\n              anchorCornerRadius={4}\r\n              borderStroke=\"#00ff00\"\r\n              anchorStroke=\"#00ff00\"\r\n              anchorFill=\"#ffffff\"\r\n              padding={5}\r\n            />\r\n          )}\r\n        </Layer>\r\n      </Stage>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Whiteboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}